var GrabController = function() {
	var selector = new GrabSelector();

	var classes = [styles.selected,styles.rejected];
	var order = [selector.selected,selector.rejected];
	var default_action = HTMLElement.prototype.action = function(el) {selector.select(el)};
	var action = [
		function(el){selector.deselect(el);},
		function(el){selector.dereject(el)}
	];
	var reset_elements = function() {for(var i=0;i<order.length;i++) reset_style(order[i]);};
	var color_elements = function() {for(var i=0;i<order.length;i++) add_style(classes[i],action[i],order[i]);};
	var reset_style = function(arr) {
		for(var i=arr.length-1;i>=0;i--){
			arr[i].className = arr[i]._className;
			delete arr[i].action;
			console.log(arr[i]);
		}
	};
	var add_style = function(className,action,arr) {
		for(var i=arr.length-1;i>=0;i--){
			arr[i].className = arr[i].className + " " + className;
			arr[i].action = action;
		}
	};
	document.body.onclick = function(e){
		block_event(e);
		e = e || window.event;
		var element = e.target || e.srcElement;
		if(element._className == undefined || element._className == "undefined"){
			if(element.className == undefined || element.className == "undefined") element._className = "";
			else element._className = element.className;
		}
		var cache_action = element.action;
		reset_elements();
		cache_action(element);
		color_elements();
		console.log(selector.selected);
		return false;
	};
};
